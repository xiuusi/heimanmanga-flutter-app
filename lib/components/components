import 'package:flutter/material.dart';

/// 平板模式导航抽屉
class TabletNavigationDrawer extends StatefulWidget {
  final int currentIndex;
  final Function(int) onIndexChanged;

  const TabletNavigationDrawer({
    Key? key,
    required this.currentIndex,
    required this.onIndexChanged,
  }) : super(key: key);

  @override
  State<TabletNavigationDrawer> createState() => _TabletNavigationDrawerState();
}

class _TabletNavigationDrawerState extends State<TabletNavigationDrawer> {
  int get _selectedIndex => widget.currentIndex;

  final List<NavigationItem> _navigationItems = [
    NavigationItem(
      icon: Icons.home,
      label: '首页',
      index: 0,
    ),
    NavigationItem(
      icon: Icons.search,
      label: '搜索',
      index: 1,
    ),
    NavigationItem(
      icon: Icons.local_offer,
      label: '标签',
      index: 2,
    ),
    NavigationItem(
      icon: Icons.history,
      label: '历史',
      index: 3,
    ),
    NavigationItem(
      icon: Icons.settings,
      label: '设置',
      index: 4,
    ),
  ];

  @override
  Widget build(BuildContext context) {
    return Container(
      color: Theme.of(context).colorScheme.surface,
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: _navigationItems.map((item) {
          final index = _navigationItems.indexOf(item);
          return _buildNavigationItem(item, index);
        }).toList(),
      ),
    );
  }


  Widget _buildNavigationItem(NavigationItem item, int index) {
    final isSelected = _selectedIndex == index;

    return Container(
      margin: const EdgeInsets.symmetric(horizontal: 4, vertical: 4),
      child: InkWell(
        onTap: () {
          widget.onIndexChanged(item.index);
        },
        borderRadius: BorderRadius.circular(8),
        child: Container(
          padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 12),
          decoration: BoxDecoration(
            color: isSelected
                ? Theme.of(context).colorScheme.primary.withOpacity(0.08)
                : Colors.transparent,
            borderRadius: BorderRadius.circular(8),
          ),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              // 图标
              Icon(
                item.icon,
                color: isSelected
                    ? Theme.of(context).colorScheme.primary
                    : Theme.of(context).colorScheme.onSurface.withOpacity(0.7),
                size: 28,
              ),
              const SizedBox(height: 6),
              // 标签
              Text(
                item.label,
                style: Theme.of(context).textTheme.bodySmall?.copyWith(
                  color: isSelected
                      ? Theme.of(context).colorScheme.primary
                      : Theme.of(context).colorScheme.onSurface.withOpacity(0.7),
                  fontWeight: isSelected ? FontWeight.w600 : FontWeight.normal,
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }


}

/// 导航项数据类
class NavigationItem {
  final IconData icon;
  final String label;
  final int index;

  const NavigationItem({
    required this.icon,
    required this.label,
    required this.index,
  });
}
